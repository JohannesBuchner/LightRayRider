<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LightRayRider &mdash; LightRayRider 2.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="canonical" href="https://johannesbuchner.github.io/lightrayrider/readme.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=f5cff4aa"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Welcome to LightRayRider’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html" class="icon icon-home">
            LightRayRider
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">LightRayRider</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#line-sphere-cutting">Line/Sphere cutting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#voronoi-cutting">Voronoi cutting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grid-cutting">Grid cutting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parallel-processing">Parallel processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license-and-acknowledgements">License and Acknowledgements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LightRayRider</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">LightRayRider</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lightrayrider">
<h1>LightRayRider<a class="headerlink" href="#lightrayrider" title="Link to this heading"></a></h1>
<p>A fast library for calculating intersections of a line with many spheres or inhomogeneous material.</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<img alt="_images/logo.png" src="_images/logo.png" />
<p>Technically speaking, the library performs three-dimensional line integrals
through various geometric bodies, such as millions of spheres of various sizes,
three-dimensional uniform grids, and arbitrary density fields approximated by their
point densities and voronoi tesselation.</p>
<p>In astrophysics, a point source can be obscured by a gas distribution along the line-of-sight.
For hydrodynamic simulations which produce such a gas distribution, this code can compute
the total density along a arbitrary ray. The output is a column density,
also known as N_H if hydrogen gas is irradiated.</p>
<a class="reference external image-reference" href="https://travis-ci.org/JohannesBuchner/LightRayRider"><img alt="https://travis-ci.org/JohannesBuchner/LightRayRider.svg?branch=master" src="https://travis-ci.org/JohannesBuchner/LightRayRider.svg?branch=master" /></a>
<a class="reference external image-reference" href="https://coveralls.io/github/JohannesBuchner/LightRayRider?branch=master"><img alt="https://coveralls.io/repos/github/JohannesBuchner/LightRayRider/badge.svg?branch=master" src="https://coveralls.io/repos/github/JohannesBuchner/LightRayRider/badge.svg?branch=master" /></a>
</section>
<section id="line-sphere-cutting">
<h2>Line/Sphere cutting<a class="headerlink" href="#line-sphere-cutting" title="Link to this heading"></a></h2>
<p>Input:</p>
<ul class="simple">
<li><p>Points in space representing sphere centres.</p></li>
<li><p>Sphere radii and densities.</p></li>
<li><p>One or more arbitrary lines from the origin.</p></li>
</ul>
<p>Output:</p>
<ul class="simple">
<li><p>This computes the total length / column density cut.</p></li>
<li><p>From distance 0 or another chosen minimal distance (or multiple).</p></li>
</ul>
<p>Method:</p>
<ul class="simple">
<li><p>Simple quadratic equations.</p></li>
</ul>
</section>
<section id="voronoi-cutting">
<h2>Voronoi cutting<a class="headerlink" href="#voronoi-cutting" title="Link to this heading"></a></h2>
<p>Input:</p>
<ul class="simple">
<li><p>Points in space.</p></li>
<li><p>Densities.</p></li>
<li><p>One or more arbitrary lines from the origin</p></li>
</ul>
<p>Output:</p>
<ul class="simple">
<li><p>This computes the total length along the line,
where every point on the line is assigned the density from the
nearest point (Voronoi segmentation).</p></li>
<li><p>From distance 0 or another chosen minimal distance (or multiple).</p></li>
</ul>
<p>Method:</p>
<ul class="simple">
<li><p>Segmentation of the line where points become equi-distant.
Performs approximately linearly with number of points.</p></li>
</ul>
</section>
<section id="grid-cutting">
<h2>Grid cutting<a class="headerlink" href="#grid-cutting" title="Link to this heading"></a></h2>
<p>Input:</p>
<ul class="simple">
<li><p>3D Grid with densities at each location</p></li>
<li><p>One or more arbitrary lines from a point</p></li>
</ul>
<p>Output:</p>
<ul class="simple">
<li><p>This computes the total length along the line,
where every point on the line is assigned the density from the
grid cell it passes through.</p></li>
<li><p>From distance 0 or another chosen minimal distance (or multiple).</p></li>
</ul>
<p>Method:</p>
<ul class="simple">
<li><p>Finding intersections of the cell borders (planes) with the lines, and
checking which cell to consider next.</p></li>
</ul>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p>Compile the c library first with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make
</pre></div>
</div>
<p>To use from Python, use raytrace.py:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">raytrace</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>You can find the declaration of how to call these functions in raytrace.py.
Basically, you pass the coordinates of your gas particles, the associated
densities and the starting point and direction of your raytracing.</p>
<p>Example usage is demonstrated in irradiate.py. This was used for Illustris and
EAGLE particle in the associated paper.
There are additional unit test examples in test/.</p>
</section>
<section id="parallel-processing">
<h2>Parallel processing<a class="headerlink" href="#parallel-processing" title="Link to this heading"></a></h2>
<p>LightRayRider supports multiple processors through OpenMP.
Set the variable OMP_NUM_THREADS to the number of processors you want to use,
and the parallel library ray-parallel.so will be loaded.</p>
</section>
<section id="license-and-acknowledgements">
<h2>License and Acknowledgements<a class="headerlink" href="#license-and-acknowledgements" title="Link to this heading"></a></h2>
<p>If you use this code, please cite “Galaxy gas as obscurer: II. Separating the galaxy-scale and
nuclear obscurers of Active Galactic Nuclei”, by Buchner &amp; Bauer (2017), <a class="reference external" href="https://arxiv.org/abs/1610.09380">https://arxiv.org/abs/1610.09380</a></p>
<p>Bibcode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@ARTICLE</span><span class="p">{</span><span class="mi">2017</span><span class="n">MNRAS</span><span class="mf">.465.4348</span><span class="n">B</span><span class="p">,</span>
   <span class="n">author</span> <span class="o">=</span> <span class="p">{{</span><span class="n">Buchner</span><span class="p">},</span> <span class="n">J</span><span class="o">.</span> <span class="ow">and</span> <span class="p">{</span><span class="n">Bauer</span><span class="p">},</span> <span class="n">F</span><span class="o">.~</span><span class="n">E</span><span class="o">.</span><span class="p">},</span>
    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;{Galaxy gas as obscurer - II. Separating the galaxy-scale and nuclear obscurers of active galactic nuclei}&quot;</span><span class="p">,</span>
  <span class="n">journal</span> <span class="o">=</span> <span class="p">{</span>\<span class="n">mnras</span><span class="p">},</span>
<span class="n">archivePrefix</span> <span class="o">=</span> <span class="s2">&quot;arXiv&quot;</span><span class="p">,</span>
   <span class="n">eprint</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1610.09380</span><span class="p">},</span>
 <span class="n">primaryClass</span> <span class="o">=</span> <span class="s2">&quot;astro-ph.HE&quot;</span><span class="p">,</span>
 <span class="n">keywords</span> <span class="o">=</span> <span class="p">{</span><span class="n">dust</span><span class="p">,</span> <span class="n">extinction</span><span class="p">,</span> <span class="n">ISM</span><span class="p">:</span> <span class="n">general</span><span class="p">,</span> <span class="n">galaxies</span><span class="p">:</span> <span class="n">active</span><span class="p">,</span> <span class="n">galaxies</span><span class="p">:</span> <span class="n">general</span><span class="p">,</span> <span class="n">galaxies</span><span class="p">:</span> <span class="n">ISM</span><span class="p">,</span> <span class="n">X</span><span class="o">-</span><span class="n">rays</span><span class="p">:</span> <span class="n">ISM</span><span class="p">},</span>
     <span class="n">year</span> <span class="o">=</span> <span class="mi">2017</span><span class="p">,</span>
    <span class="n">month</span> <span class="o">=</span> <span class="n">mar</span><span class="p">,</span>
   <span class="n">volume</span> <span class="o">=</span> <span class="mi">465</span><span class="p">,</span>
    <span class="n">pages</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4348</span><span class="o">-</span><span class="mi">4362</span><span class="p">},</span>
      <span class="n">doi</span> <span class="o">=</span> <span class="p">{</span><span class="mf">10.1093</span><span class="o">/</span><span class="n">mnras</span><span class="o">/</span><span class="n">stw2955</span><span class="p">},</span>
   <span class="n">adsurl</span> <span class="o">=</span> <span class="p">{</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">adsabs</span><span class="o">.</span><span class="n">harvard</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="nb">abs</span><span class="o">/</span><span class="mi">2017</span><span class="n">MNRAS</span><span class="mf">.465.4348</span><span class="n">B</span><span class="p">},</span>
  <span class="n">adsnote</span> <span class="o">=</span> <span class="p">{</span><span class="n">Provided</span> <span class="n">by</span> <span class="n">the</span> <span class="n">SAO</span><span class="o">/</span><span class="n">NASA</span> <span class="n">Astrophysics</span> <span class="n">Data</span> <span class="n">System</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The code is licensed under AGPLv3 (see LICENSE file).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to LightRayRider’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2024, Johannes Buchner.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>